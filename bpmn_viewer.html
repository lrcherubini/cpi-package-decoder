<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BPMN Viewer</title>
<link rel="stylesheet" href="https://unpkg.com/bpmn-js@10.1.0/dist/assets/bpmn-js.css">
<style>
  html, body { height: 100%; margin: 0; }
  #canvas { width: 100%; height: 100%; }
</style>
</head>
<body>
<div id="canvas"></div>
<script src="https://unpkg.com/bpmn-js@10.1.0/dist/bpmn-viewer.development.js"></script>
<script>
(function(){
  const params = new URLSearchParams(window.location.search);
  const dataParam = params.get('data');
  const lang = params.get('lang') || 'pt-BR';
  const messages = {
    'pt-BR': {
      noData: 'Nenhum dado BPMN fornecido.',
      error: 'Erro ao carregar diagrama: '
    },
    'en-US': {
      noData: 'No BPMN data provided.',
      error: 'Error loading diagram: '
    },
    'es-ES': {
      noData: 'No se proporcionaron datos BPMN.',
      error: 'Error al cargar el diagrama: '
    }
  };
  const msg = messages[lang] || messages['en-US'];
  if (!dataParam) {
      document.body.innerHTML = '<p>' + msg.noData + '</p>';
      return;
    }
    const xml = atob(decodeURIComponent(dataParam));
  const viewer = new BpmnJS({ container: '#canvas' });
  viewer.importXML(xml).then(function(){
    viewer.get('canvas').zoom('fit-viewport');
  }).catch(function(err){
    document.body.innerHTML = '<pre>' + msg.error + err + '</pre>';
  });
})();
</script>
</body>
</html>
